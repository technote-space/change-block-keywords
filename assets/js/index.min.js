/*!
 * change-block-keywords 1.0.0
 * Copyright (c) 2019 Technote <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_ALL=t.INITIALIZED=t.RESET_KEYWORD=t.SET_KEYWORDS=t.STORE_NAME=void 0;var n=r(2);t.STORE_NAME=n.PLUGIN_NAME,t.SET_KEYWORDS="@@CBK/SET_KEYWORDS",t.RESET_KEYWORD="@@CBK/RESET_KEYWORD",t.INITIALIZED="@@CBK/INITIALIZED",t.RESET_ALL="@@CBK/RESET_ALL"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);Object.defineProperty(t,"translate",{enumerable:!0,get:function(){return n.translate}});var o=r(8);Object.defineProperty(t,"getNamespace",{enumerable:!0,get:function(){return o.getNamespace}}),Object.defineProperty(t,"getKeywordsFormComponent",{enumerable:!0,get:function(){return o.getKeywordsFormComponent}}),Object.defineProperty(t,"getSetupKeywordsFunc",{enumerable:!0,get:function(){return o.getSetupKeywordsFunc}});var a=r(11);Object.defineProperty(t,"getNameKeyword",{enumerable:!0,get:function(){return a.getNameKeyword}}),Object.defineProperty(t,"arrayUniq",{enumerable:!0,get:function(){return a.arrayUniq}}),Object.defineProperty(t,"copyObj",{enumerable:!0,get:function(){return a.copyObj}}),Object.defineProperty(t,"createState",{enumerable:!0,get:function(){return a.createState}}),Object.defineProperty(t,"isTargetBlockType",{enumerable:!0,get:function(){return a.isTargetBlockType}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLUGIN_NAME="change-block-keywords",t.TRANSLATE_DATA=cbkParams.translate},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return{type:"SELECT",storeKey:e,selectorName:t,args:n}},t.default={SELECT:function(e){var t,r=e.storeKey,n=e.selectorName,o=e.args;return(t=wp.data.select(r))[n].apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(o))}}},function(e,t,r){"use strict";r(5);var n=r(1),o=wp.hooks.addFilter;o("editor.BlockEdit",(0,n.getNamespace)("add-keywords-form"),(0,n.getKeywordsFormComponent)()),o("blocks.registerBlockType",(0,n.getNamespace)("setup-keywords"),(0,n.getSetupKeywordsFunc)())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=s(r(6)),a=i(r(12)),u=i(r(13)),c=s(r(3));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,wp.data.registerStore)(n.STORE_NAME,{reducer:o.default,selectors:a,actions:u,controls:c.default,persist:["hasInitialized","keywords"]});t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasInitialized=s,t.keywords=l;var n=r(0),o=r(1),a=wp.data,u=a.combineReducers,c=a.select,i=a.dispatch;function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n.INITIALIZED:return(0,o.createState)(e,t.name,!0);case n.RESET_ALL:return{};default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n.SET_KEYWORDS:var r=c("core/blocks").getBlockType(t.name);return r.keywords=t.keywords,i("core/blocks").addBlockTypes(r),(0,o.createState)(e,t.name,t.keywords);case n.RESET_KEYWORD:return(0,o.createState)(e,t.name,(0,o.arrayUniq)(t.keywords.concat([(0,o.getNameKeyword)(t.name)])));default:return e}}t.default=u({hasInitialized:s,keywords:l})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=function(e){if(e in n.TRANSLATE_DATA)return n.TRANSLATE_DATA[e];return e};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNamespace=function(e){return n.PLUGIN_NAME+"/"+e},t.getKeywordsFormComponent=function(){return c(function(e){return function(t){return t.isSelected&&(0,u.isTargetBlockType)(t)?wp.element.createElement(i,null,wp.element.createElement(e,t),wp.element.createElement(a.Keywords,{props:t})):wp.element.createElement(e,t)}})},t.getSetupKeywordsFunc=function(){return function(e,t){return(0,u.isTargetBlockType)(e)?(d(o.STORE_NAME).initialize(t,e.keywords),e.keywords=l(o.STORE_NAME).getKeywords(t),e):e}};var n=r(2),o=r(0),a=r(9),u=r(1),c=wp.compose.createHigherOrderComponent,i=wp.element.Fragment,s=wp.data,l=s.select,d=s.dispatch},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keywords=void 0;var n,o=r(10),a=(n=o)&&n.__esModule?n:{default:n};t.Keywords=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keywords=d;var n=r(0),o=r(1),a=wp.components.FormTokenField,u=wp.editor.InspectorAdvancedControls,c=wp.compose.compose,i=wp.data,s=i.withSelect,l=i.withDispatch;function d(e){var t=e.props,r=e.keywords,n=e.setKeywords;return wp.element.createElement(u,null,wp.element.createElement(a,{value:r(t),onChange:function(e){return n(t,e)},label:(0,o.translate)("Set Search Keywords")}))}t.default=c(s(function(e){return{keywords:function(t){return e(n.STORE_NAME).getKeywords(t.name)}}}),l(function(e){return{setKeywords:function(t,r){return e(n.STORE_NAME).setKeywords(t.name,r)}}}))(d)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNameKeyword=function(e){return e.split("/").slice(-1)[0]},t.arrayUniq=function(e){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(new Set(e)))},t.copyObj=o,t.createState=function(e,t,r){var n=o(e);return n[t]=r,n},t.isTargetBlockType=function(e){return!n(e)&&"core/template"!==e.name};var n=wp.blocks.isReusableBlock;function o(e){return Object.assign({},e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeywords=function(e,t){return e.keywords[t]||[]},t.hasInitialized=function(e,t){return e.hasInitialized[t]||!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=i,t.setKeywords=s,t.resetKeyword=l;var n=r(0),o=r(3),a=regeneratorRuntime.mark(i),u=regeneratorRuntime.mark(s),c=regeneratorRuntime.mark(l);function i(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.select)(n.STORE_NAME,"hasInitialized",e);case 2:if(r.sent){r.next=5;break}return r.next=5,l(e,t);case 5:case"end":return r.stop()}},a,this)}function s(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,{type:n.SET_KEYWORDS,name:e,keywords:t};case 2:case"end":return r.stop()}},u,this)}function l(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=3;break}return r.next=3,{type:n.RESET_KEYWORD,name:e,keywords:t};case 3:return r.next=5,{type:n.INITIALIZED,name:e};case 5:case"end":return r.stop()}},c,this)}}]);