/*!
 * change-block-keywords 1.0.1
 * Copyright (c) 2019 Technote <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r);var n={};t.r(n),t.d(n,"getKeywords",function(){return _}),t.d(n,"hasInitialized",function(){return z});var o={};t.r(o),t.d(o,"initialize",function(){return W}),t.d(o,"setKeywords",function(){return Y}),t.d(o,"resetKeyword",function(){return H});var a="change-block-keywords",i=cbkParams.translate,c=a,u="@@CBK/SET_KEYWORDS",s="@@CBK/RESET_KEYWORD",l="@@CBK/INITIALIZED",d="@@CBK/RESET_ALL";var p=wp.components.FormTokenField,f=wp.editor.InspectorAdvancedControls,y=wp.compose.compose,w=wp.data,m=w.withSelect,g=w.withDispatch;var v=y(m(function(e){return{keywords:function(r){return e(c).getKeywords(r.name)}}}),g(function(e){return{setKeywords:function(r,t){return e(c).setKeywords(r.name,t)}}}))(function(e){var r,t=e.props,n=e.keywords,o=e.setKeywords;return wp.element.createElement(f,null,wp.element.createElement(p,{value:n(t),onChange:function(e){return o(t,e)},label:(r="Set Search Keywords",r in i?i[r]:r)}))}),b=wp.compose.createHigherOrderComponent,k=wp.element.Fragment,h=wp.data,E=h.select,S=h.dispatch;function K(e){return a+"/"+e}function x(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var O=wp.blocks.isReusableBlock;function j(e,r,t){var n,o=(n=e,Object.assign({},n));return o[r]=t,o}function A(e){return!(!e||!e.name||O(e)||"core/template"===e.name)}var T=wp.data,I=T.combineReducers,R=T.select,B=T.dispatch;var C=I({hasInitialized:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l:return j(e,r.name,!0);case d:return{};default:return e}},keywords:function(){var e,r,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case u:var o=R("core/blocks").getBlockType(n.name);return o.keywords=n.keywords,B("core/blocks").addBlockTypes(o),j(t,n.name,n.keywords);case s:return j(t,n.name,(e=n.keywords.concat([(r=n.name,r.split("/").slice(-1)[0])]),x(new Set(e))));default:return t}}});function _(e,r){return e.keywords[r]||[]}function z(e,r){return e.hasInitialized[r]||!1}function P(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var L=function(e,r){for(var t=arguments.length,n=new Array(t>2?t-2:0),o=2;o<t;o++)n[o-2]=arguments[o];return{type:"SELECT",storeKey:e,selectorName:r,args:n}},D={SELECT:function(e){var r,t=e.storeKey,n=e.selectorName,o=e.args;return(r=wp.data.select(t))[n].apply(r,P(o))}},F=regeneratorRuntime.mark(W),M=regeneratorRuntime.mark(Y),N=regeneratorRuntime.mark(H);function W(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(c,"hasInitialized",e);case 2:if(t.sent){t.next=5;break}return t.next=5,H(e,r);case 5:case"end":return t.stop()}},F)}function Y(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,{type:u,name:e,keywords:r};case 2:case"end":return t.stop()}},M)}function H(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=3;break}return t.next=3,{type:s,name:e,keywords:r};case 3:return t.next=5,{type:l,name:e};case 5:case"end":return t.stop()}},N)}(0,wp.data.registerStore)(c,{reducer:C,selectors:n,actions:o,controls:D,persist:["hasInitialized","keywords"]});var Z=wp.hooks.addFilter;Z("editor.BlockEdit",K("add-keywords-form"),b(function(e){return function(r){return A(r)&&r.isSelected?wp.element.createElement(k,null,wp.element.createElement(e,r),wp.element.createElement(v,{props:r})):wp.element.createElement(e,r)}})),Z("blocks.registerBlockType",K("setup-keywords"),function(e,r){return A(e)?(S(c).initialize(r,e.keywords),e.keywords=E(c).getKeywords(r),e):e})}]);